{"ast":null,"code":"var _jsxFileName = \"/home/valentinalopez/Development/udeverso-react/client/src/components/Ball.jsx\",\n  _s = $RefreshSig$();\n// Ball.js\nimport React, { useRef, useMemo } from \"react\";\nimport { useFrame } from \"@react-three/fiber\";\nimport { Vector3, Quaternion } from \"three\";\nimport { useSocketManager } from \"./SocketManager\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Ball({\n  userId,\n  floor\n}) {\n  _s();\n  const ref = useRef();\n  const v = useMemo(() => new Vector3(), []);\n  const q = useMemo(() => new Quaternion(), []);\n  const angularVelocity = useMemo(() => new Vector3(), []);\n  useFrame((_, delta) => {\n    const keyMap = {\n      KeyW: false,\n      KeyS: false,\n      KeyA: false,\n      KeyD: false\n    };\n    keyMap[\"KeyW\"] && (angularVelocity.x -= delta * 5);\n    keyMap[\"KeyS\"] && (angularVelocity.x += delta * 5);\n    keyMap[\"KeyA\"] && (angularVelocity.z += delta * 5);\n    keyMap[\"KeyD\"] && (angularVelocity.z -= delta * 5);\n    q.setFromAxisAngle(angularVelocity, delta).normalize();\n    ref.current.applyQuaternion(q);\n    angularVelocity.lerp(v, 0.01); // slow down the roll\n\n    floor.current.position.x += angularVelocity.z * delta;\n    floor.current.position.z -= angularVelocity.x * delta;\n    floor.current.position.x = floor.current.position.x % 10;\n    floor.current.position.z = floor.current.position.z % 10;\n    const position = ref.current.position.toArray();\n    socket.emit(\"move\", {\n      userId,\n      position\n    });\n  });\n  return /*#__PURE__*/_jsxDEV(\"mesh\", {\n    ref: ref,\n    \"position-y\": 1.0,\n    children: [/*#__PURE__*/_jsxDEV(\"sphereGeometry\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"meshNormalMaterial\", {\n      wireframe: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n_s(Ball, \"MBz1R6KIbXXpUojD8FVb4Zfg9g0=\", false, function () {\n  return [useFrame];\n});\n_c = Ball;\nexport default Ball;\nvar _c;\n$RefreshReg$(_c, \"Ball\");","map":{"version":3,"names":["React","useRef","useMemo","useFrame","Vector3","Quaternion","useSocketManager","jsxDEV","_jsxDEV","Ball","userId","floor","_s","ref","v","q","angularVelocity","_","delta","keyMap","KeyW","KeyS","KeyA","KeyD","x","z","setFromAxisAngle","normalize","current","applyQuaternion","lerp","position","toArray","socket","emit","children","fileName","_jsxFileName","lineNumber","columnNumber","wireframe","_c","$RefreshReg$"],"sources":["/home/valentinalopez/Development/udeverso-react/client/src/components/Ball.jsx"],"sourcesContent":["// Ball.js\nimport React, { useRef, useMemo } from \"react\";\nimport { useFrame } from \"@react-three/fiber\";\nimport { Vector3, Quaternion } from \"three\";\nimport { useSocketManager } from \"./SocketManager\";\n\nfunction Ball({ userId, floor }) {\n  const ref = useRef();\n\n  const v = useMemo(() => new Vector3(), []);\n  const q = useMemo(() => new Quaternion(), []);\n  const angularVelocity = useMemo(() => new Vector3(), []);\n\n  useFrame((_, delta) => {\n    const keyMap = {\n      KeyW: false,\n      KeyS: false,\n      KeyA: false,\n      KeyD: false,\n    };\n\n    keyMap[\"KeyW\"] && (angularVelocity.x -= delta * 5);\n    keyMap[\"KeyS\"] && (angularVelocity.x += delta * 5);\n    keyMap[\"KeyA\"] && (angularVelocity.z += delta * 5);\n    keyMap[\"KeyD\"] && (angularVelocity.z -= delta * 5);\n\n    q.setFromAxisAngle(angularVelocity, delta).normalize();\n    ref.current.applyQuaternion(q);\n\n    angularVelocity.lerp(v, 0.01); // slow down the roll\n\n    floor.current.position.x += angularVelocity.z * delta;\n    floor.current.position.z -= angularVelocity.x * delta;\n\n    floor.current.position.x = floor.current.position.x % 10;\n    floor.current.position.z = floor.current.position.z % 10;\n\n    const position = ref.current.position.toArray();\n    socket.emit(\"move\", { userId, position });\n  });\n\n  return (\n    <mesh ref={ref} position-y={1.0}>\n      <sphereGeometry />\n      <meshNormalMaterial wireframe />\n    </mesh>\n  );\n}\n\nexport default Ball;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
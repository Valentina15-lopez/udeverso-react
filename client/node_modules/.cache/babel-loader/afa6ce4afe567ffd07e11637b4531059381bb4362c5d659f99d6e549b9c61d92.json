{"ast":null,"code":"var _jsxFileName = \"/home/valentinalopez/Development/udeverso-react/client/src/components/AulaScene.jsx\",\n  _s = $RefreshSig$();\n// AulaScene.js\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { useSocketManager } from \"./SocketManager\";\nimport Ball from \"./Ball\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AulaScene = () => {\n  _s();\n  const ref = useRef();\n  const [userCount, setUserCount] = useState(0);\n  const {\n    socket\n  } = useSocketManager();\n  const handleNewUser = () => {\n    setUserCount(prevCount => prevCount + 1);\n  };\n  useEffect(() => {\n    window.addEventListener(\"storage\", handleNewUser);\n    return () => {\n      window.removeEventListener(\"storage\", handleNewUser);\n    };\n  }, []);\n  useEffect(() => {\n    // Emitir un evento al servidor al cargar la escena\n    socket.emit(\"sceneLoaded\");\n\n    // Escuchar eventos del servidor\n    socket.on(\"userConnected\", () => {\n      console.log(\"User connected\");\n      // Realizar acciones adicionales cuando un usuario se conecta\n    });\n    socket.on(\"userDisconnected\", () => {\n      console.log(\"User disconnected\");\n      // Realizar acciones adicionales cuando un usuario se desconecta\n    });\n    return () => {\n      // Desconectar listeners al desmontar el componente\n      socket.off(\"userConnected\");\n      socket.off(\"userDisconnected\");\n    };\n  }, [socket]);\n  return /*#__PURE__*/_jsxDEV(Canvas, {\n    camera: {\n      position: [0, 2.5, 2.5]\n    },\n    onCreated: ({\n      camera\n    }) => camera.lookAt(0, 1, 0),\n    children: [/*#__PURE__*/_jsxDEV(\"gridHelper\", {\n      ref: ref,\n      args: [100, 100]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), [...Array(userCount)].map((_, index) => /*#__PURE__*/_jsxDEV(Ball, {\n      userId: index + 1,\n      floor: ref\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n_s(AulaScene, \"eLM9JcE4N44pkFzy2BPN5EFN2Hg=\", false, function () {\n  return [useSocketManager];\n});\n_c = AulaScene;\nexport default AulaScene;\nvar _c;\n$RefreshReg$(_c, \"AulaScene\");","map":{"version":3,"names":["React","useRef","useEffect","useState","Canvas","useSocketManager","Ball","jsxDEV","_jsxDEV","AulaScene","_s","ref","userCount","setUserCount","socket","handleNewUser","prevCount","window","addEventListener","removeEventListener","emit","on","console","log","off","camera","position","onCreated","lookAt","children","args","fileName","_jsxFileName","lineNumber","columnNumber","Array","map","_","index","userId","floor","_c","$RefreshReg$"],"sources":["/home/valentinalopez/Development/udeverso-react/client/src/components/AulaScene.jsx"],"sourcesContent":["// AulaScene.js\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { useSocketManager } from \"./SocketManager\";\nimport Ball from \"./Ball\";\n\nconst AulaScene = () => {\n  const ref = useRef();\n  const [userCount, setUserCount] = useState(0);\n  const { socket } = useSocketManager();\n\n  const handleNewUser = () => {\n    setUserCount((prevCount) => prevCount + 1);\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"storage\", handleNewUser);\n    return () => {\n      window.removeEventListener(\"storage\", handleNewUser);\n    };\n  }, []);\n\n  useEffect(() => {\n    // Emitir un evento al servidor al cargar la escena\n    socket.emit(\"sceneLoaded\");\n\n    // Escuchar eventos del servidor\n    socket.on(\"userConnected\", () => {\n      console.log(\"User connected\");\n      // Realizar acciones adicionales cuando un usuario se conecta\n    });\n\n    socket.on(\"userDisconnected\", () => {\n      console.log(\"User disconnected\");\n      // Realizar acciones adicionales cuando un usuario se desconecta\n    });\n\n    return () => {\n      // Desconectar listeners al desmontar el componente\n      socket.off(\"userConnected\");\n      socket.off(\"userDisconnected\");\n    };\n  }, [socket]);\n\n  return (\n    <Canvas\n      camera={{ position: [0, 2.5, 2.5] }}\n      onCreated={({ camera }) => camera.lookAt(0, 1, 0)}\n    >\n      <gridHelper ref={ref} args={[100, 100]} />\n\n      {[...Array(userCount)].map((_, index) => (\n        <Ball key={index} userId={index + 1} floor={ref} />\n      ))}\n    </Canvas>\n  );\n};\n\nexport default AulaScene;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAASC,MAAM,QAAQ,oBAAoB;AAC3C,SAASC,gBAAgB,QAAQ,iBAAiB;AAClD,OAAOC,IAAI,MAAM,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtB,MAAMC,GAAG,GAAGV,MAAM,CAAC,CAAC;EACpB,MAAM,CAACW,SAAS,EAAEC,YAAY,CAAC,GAAGV,QAAQ,CAAC,CAAC,CAAC;EAC7C,MAAM;IAAEW;EAAO,CAAC,GAAGT,gBAAgB,CAAC,CAAC;EAErC,MAAMU,aAAa,GAAGA,CAAA,KAAM;IAC1BF,YAAY,CAAEG,SAAS,IAAKA,SAAS,GAAG,CAAC,CAAC;EAC5C,CAAC;EAEDd,SAAS,CAAC,MAAM;IACde,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEH,aAAa,CAAC;IACjD,OAAO,MAAM;MACXE,MAAM,CAACE,mBAAmB,CAAC,SAAS,EAAEJ,aAAa,CAAC;IACtD,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAENb,SAAS,CAAC,MAAM;IACd;IACAY,MAAM,CAACM,IAAI,CAAC,aAAa,CAAC;;IAE1B;IACAN,MAAM,CAACO,EAAE,CAAC,eAAe,EAAE,MAAM;MAC/BC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC7B;IACF,CAAC,CAAC;IAEFT,MAAM,CAACO,EAAE,CAAC,kBAAkB,EAAE,MAAM;MAClCC,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;MAChC;IACF,CAAC,CAAC;IAEF,OAAO,MAAM;MACX;MACAT,MAAM,CAACU,GAAG,CAAC,eAAe,CAAC;MAC3BV,MAAM,CAACU,GAAG,CAAC,kBAAkB,CAAC;IAChC,CAAC;EACH,CAAC,EAAE,CAACV,MAAM,CAAC,CAAC;EAEZ,oBACEN,OAAA,CAACJ,MAAM;IACLqB,MAAM,EAAE;MAAEC,QAAQ,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG;IAAE,CAAE;IACpCC,SAAS,EAAEA,CAAC;MAAEF;IAAO,CAAC,KAAKA,MAAM,CAACG,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE;IAAAC,QAAA,gBAElDrB,OAAA;MAAYG,GAAG,EAAEA,GAAI;MAACmB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG;IAAE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAEzC,CAAC,GAAGC,KAAK,CAACvB,SAAS,CAAC,CAAC,CAACwB,GAAG,CAAC,CAACC,CAAC,EAAEC,KAAK,kBAClC9B,OAAA,CAACF,IAAI;MAAaiC,MAAM,EAAED,KAAK,GAAG,CAAE;MAACE,KAAK,EAAE7B;IAAI,GAArC2B,KAAK;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAkC,CACnD,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACI,CAAC;AAEb,CAAC;AAACxB,EAAA,CAlDID,SAAS;EAAA,QAGMJ,gBAAgB;AAAA;AAAAoC,EAAA,GAH/BhC,SAAS;AAoDf,eAAeA,SAAS;AAAC,IAAAgC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
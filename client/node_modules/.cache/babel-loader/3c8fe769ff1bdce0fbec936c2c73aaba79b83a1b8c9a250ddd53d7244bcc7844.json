{"ast":null,"code":"var _jsxFileName = \"/home/valentinalopez/Development/udeverso-react/client/src/components/Ball.jsx\",\n  _s = $RefreshSig$();\n// Ball.js\nimport React, { useRef, useMemo } from \"react\";\nimport { useFrame } from \"@react-three/fiber\";\nimport { Vector3, Quaternion } from \"three\";\nimport { useSocketManager } from \"./SocketManager\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Ball({\n  userId,\n  floor\n}) {\n  _s();\n  const ref = useRef();\n  const {\n    socket\n  } = useSocketManager();\n  const v = useMemo(() => new Vector3(), []);\n  const q = useMemo(() => new Quaternion(), []);\n  const angularVelocity = useMemo(() => new Vector3(), []);\n  useFrame((_, delta) => {\n    const keyMap = {\n      KeyW: false,\n      KeyS: false,\n      KeyA: false,\n      KeyD: false\n    };\n    document.addEventListener(\"keydown\", e => {\n      keyMap[e.code] = true;\n    });\n    document.addEventListener(\"keyup\", e => {\n      keyMap[e.code] = false;\n    });\n    keyMap[\"KeyW\"] && (angularVelocity.x -= delta * 5);\n    keyMap[\"KeyS\"] && (angularVelocity.x += delta * 5);\n    keyMap[\"KeyA\"] && (angularVelocity.z += delta * 5);\n    keyMap[\"KeyD\"] && (angularVelocity.z -= delta * 5);\n    q.setFromAxisAngle(angularVelocity, delta).normalize();\n    ref.current.applyQuaternion(q);\n    angularVelocity.lerp(v, 0.01); // slow down the roll\n\n    floor.current.position.x += angularVelocity.z * delta;\n    floor.current.position.z -= angularVelocity.x * delta;\n    floor.current.position.x = floor.current.position.x % 10;\n    floor.current.position.z = floor.current.position.z % 10;\n    const position = ref.current.position.toArray();\n    socket.emit(\"move\", {\n      userId,\n      position\n    });\n  });\n  return /*#__PURE__*/_jsxDEV(\"mesh\", {\n    ref: ref,\n    \"position-y\": 1.0,\n    children: [/*#__PURE__*/_jsxDEV(\"sphereGeometry\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"meshNormalMaterial\", {\n      wireframe: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n_s(Ball, \"FPCsjXhh6EJEwR2dQge7VvD8XAw=\", false, function () {\n  return [useSocketManager, useFrame];\n});\n_c = Ball;\nexport default Ball;\nvar _c;\n$RefreshReg$(_c, \"Ball\");","map":{"version":3,"names":["React","useRef","useMemo","useFrame","Vector3","Quaternion","useSocketManager","jsxDEV","_jsxDEV","Ball","userId","floor","_s","ref","socket","v","q","angularVelocity","_","delta","keyMap","KeyW","KeyS","KeyA","KeyD","document","addEventListener","e","code","x","z","setFromAxisAngle","normalize","current","applyQuaternion","lerp","position","toArray","emit","children","fileName","_jsxFileName","lineNumber","columnNumber","wireframe","_c","$RefreshReg$"],"sources":["/home/valentinalopez/Development/udeverso-react/client/src/components/Ball.jsx"],"sourcesContent":["// Ball.js\nimport React, { useRef, useMemo } from \"react\";\nimport { useFrame } from \"@react-three/fiber\";\nimport { Vector3, Quaternion } from \"three\";\nimport { useSocketManager } from \"./SocketManager\";\n\nfunction Ball({ userId, floor }) {\n  const ref = useRef();\n  const { socket } = useSocketManager();\n\n  const v = useMemo(() => new Vector3(), []);\n  const q = useMemo(() => new Quaternion(), []);\n  const angularVelocity = useMemo(() => new Vector3(), []);\n\n  useFrame((_, delta) => {\n    const keyMap = {\n      KeyW: false,\n      KeyS: false,\n      KeyA: false,\n      KeyD: false,\n    };\n\n    document.addEventListener(\"keydown\", (e) => {\n      keyMap[e.code] = true;\n    });\n\n    document.addEventListener(\"keyup\", (e) => {\n      keyMap[e.code] = false;\n    });\n\n    keyMap[\"KeyW\"] && (angularVelocity.x -= delta * 5);\n    keyMap[\"KeyS\"] && (angularVelocity.x += delta * 5);\n    keyMap[\"KeyA\"] && (angularVelocity.z += delta * 5);\n    keyMap[\"KeyD\"] && (angularVelocity.z -= delta * 5);\n\n    q.setFromAxisAngle(angularVelocity, delta).normalize();\n    ref.current.applyQuaternion(q);\n\n    angularVelocity.lerp(v, 0.01); // slow down the roll\n\n    floor.current.position.x += angularVelocity.z * delta;\n    floor.current.position.z -= angularVelocity.x * delta;\n\n    floor.current.position.x = floor.current.position.x % 10;\n    floor.current.position.z = floor.current.position.z % 10;\n\n    const position = ref.current.position.toArray();\n    socket.emit(\"move\", { userId, position });\n  });\n\n  return (\n    <mesh ref={ref} position-y={1.0}>\n      <sphereGeometry />\n      <meshNormalMaterial wireframe />\n    </mesh>\n  );\n}\n\nexport default Ball;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}